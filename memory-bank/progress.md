# Suivi de Progression

> **Politique de conservation**  
> - Cette page liste les t√¢ches termin√©es des ~90 derniers jours (actuellement d√©cembre 2025).  
> - Les p√©riodes plus anciennes sont r√©sum√©es ci-dessous et d√©taill√©es dans `memory-bank/archives/progress_legacy.md`.

## Statut Actuel
Aucune t√¢che active.

### Janvier 2026
- [2026-01-21 14:24:00] **Audit Backend ‚Äî Simplification injection ENV Step5 (COMPLET)** : Refactor `workflow_scripts/step5/run_tracking_manager.py` pour centraliser la lecture des variables d'environnement via `_EnvConfig`, clarifier l'arbitrage GPU/CPU/engines et encapsuler l'injection `LD_LIBRARY_PATH`/defaults threading dans un helper partag√©. Validation : `python3 -m py_compile workflow_scripts/step5/run_tracking_manager.py`.
- [2026-01-21 13:38:00] **Audit Backend ‚Äî Cache root configurable + ouverture explorateur d√©sactiv√©e en prod/headless (COMPLET)** : Remplacement du `/mnt/cache` hardcod√© par `CACHE_ROOT_DIR` (ENV) dans `config.settings`, et ajout de garde-fous sur `FilesystemService.open_path_in_explorer()` (`DISABLE_EXPLORER_OPEN`, `ENABLE_EXPLORER_OPEN`, d√©tection headless DISPLAY/WAYLAND). Tests : `pytest -q tests/unit/test_filesystem_service.py`.
- [2026-01-21 13:20:00] **Migration historique t√©l√©chargements vers SQLite (COMPLET)** : Ajout du repository `download_history_repository`, refactor complet de `CSVService` pour une persistance multi-process (SQLite), script CLI `scripts/migrate_download_history_to_sqlite.py` ex√©cut√© (34 URL migr√©es) puis suppression de `download_history.json(.bak)`. Documentation mise √† jour (`CSV_DOWNLOADS_MANAGEMENT.md`, `MONITORING_TELECHARGEMENTS_SOURCES.md`) et tests cibl√©s `pytest -q tests/unit/test_csv_service_url_normalization.py tests/integration/test_csv_dry_run.py tests/integration/test_csv_monitor_no_retrigger.py tests/integration/test_double_encoded_urls.py`.
- [2026-01-20 23:48:00] **Repomix ‚Äî Configuration optimis√©e + g√©n√©ration** : Ajout d‚Äôun `repomix.config.json` ciblant uniquement le code applicatif (exclusions archives/assets/logs) pour √©viter les d√©passements de taille, puis ex√©cution valid√©e `npx repomix --config repomix.config.json` (sortie `repomix-output.md`, 275 fichiers, 798‚ÄØ619 tokens). Documentation fournie pour rejouer la commande.
- [2026-01-20 20:02:00] **Audit Logs Panel ‚Äî Phase 2 (Int√©gration Timeline-Logs) (COMPLET)** : Refactor du panneau logs en overlay plus contextuel (header enrichi : √©tape/statut/timer, conteneur global de boutons ‚Äúlogs sp√©cifiques‚Äù), et ancrage vertical en mode compact pr√®s de l‚Äô√©tape active. Fichiers modifi√©s : `templates/index_new.html`, `static/css/components/logs.css`, `static/domElements.js`, `static/uiUpdater.js`, `tests/frontend/test_timeline_logs_phase2.mjs`, `package.json`. Validation : `npm run test:frontend` OK.
- [2026-01-20 18:17:00] **Audit Logs Panel ‚Äî Phase 1 (Coh√©rence Visuelle Imm√©diate) (COMPLET)** : Harmonisation du panneau de logs avec la Timeline Connect√©e (palette + motion unifi√©es, axe visuel ‚Äúspine‚Äù dans le panel). Modifications appliqu√©es : `static/css/components/logs.css`, `static/css/layout.css`. Tests frontend OK (`npm run test:frontend`).
- [2026-01-20 14:30:00] **Fix Top Bar Scrolling ‚Äî Correction positionnement fixe (COMPLET)** : Diagnostic et correction du probl√®me o√π la top bar et la global progress bar disparaissent progressivement pendant le scroll. Impl√©mentation d'une solution robuste avec `.topbar-affix` en `position: fixed`, ajustement du `padding-top` du `body` en `calc(var(--topbar-height) + 20px)`, et ajout d'un spacer `#topbar-spacer` pour pr√©server le flux de contenu. Modifications appliqu√©es : `templates/index_new.html` (spacer), `static/css/base.css` (padding-top), `static/css/components/controls.css` (position fixed), `static/domElements.js` (export topbarAffix). Tests frontend OK (`npm run test:frontend`). Validation manuelle requise apr√®s hard refresh.
- [2026-01-20 12:53:00] **Auto-scroll Timeline Connect√©e ‚Äî Correction structurelle du centrage vertical (COMPLET)** : R√©solution d√©finitive du probl√®me de glissement progressif des √©tapes vers le bas pendant les s√©quences. Solution structurelle impl√©ment√©e : (1) Ajout d'un espace scrollable en bas de timeline (`timeline-scroll-spacer`) pour permettre le centrage de STEP7, (2) Suppression des `scroll-margin-top` biais√©s sur `.timeline-step` et `.steps-column`, (3) Recentrage throttl√© pendant la progression dans `uiUpdater.js` (700ms) pour compenser les changements de hauteur du `progress_text`, (4) Scroll d√©terministe dans `scrollManager.js` (calcul direct + `window.scrollTo` au lieu de `scrollIntoView`), (5) Simplification de `sequenceManager.js` pour utiliser un chemin unique `scrollToActiveStep({behavior:'smooth'})`. Tests frontend OK. En attente de validation manuelle apr√®s hard refresh.
- [2026-01-20 09:00:00] **Timeline Connect√©e ‚Äî Phase 1 (HTML/CSS) (COMPLET)** : Impl√©mentation de la Phase 1 du redesign Dashboard `index_new.html` selon `docs/workflow/audits/AUDIT_UX_DASHBOARD_UNIFIED-2026-01-20.md`. Ajouts de variables Timeline (tailles + `*-rgb` + palette pipeline) dans `static/css/variables.css`, refonte des styles steps vers une pr√©sentation "Timeline" (spine, n≈ìuds, connecteurs, zone `.node-actions`) dans `static/css/components/steps.css`, et mise √† jour de la boucle Jinja des steps dans `templates/index_new.html` avec structure s√©mantique (`role="list"/`role="listitem"`, `workflow-steps`, `timeline-step`). Compatibilit√© JS conserv√©e (IDs/classe `.step`, boutons `.run-button`/`.cancel-button`/`.specific-log-button`, checkboxes `.custom-sequence-checkbox`).
- [2026-01-20 10:00:00] **Timeline Connect√©e ‚Äî Phase 2 (Visual Polish) (COMPLET)** : Harmonisation des transitions (dur√©es/easing), micro-interactions premium (hover/focus-within) sur la Timeline (spine/n≈ìuds/connecteurs), ajout d‚Äôun focus-visible global, et ajustements responsive cibl√©s sans changement HTML/JS. Fichiers modifi√©s : `static/css/variables.css`, `static/css/base.css`, `static/css/components/steps.css`.
- [2026-01-20 10:55:00] **Timeline Connect√©e ‚Äî Phase 3 (Advanced Features) (COMPLET)** : Impl√©mentation de la Phase 3 du redesign Dashboard : panneau de d√©tails contextuel synchronis√© avec AppState + DOMBatcher (clic/clavier, focus restore, fermeture auto logs), accessibilit√© compl√®te (aria-expanded, navigation clavier, Escape, aria-live), optimisations UI (layout compact coexistence logs/d√©tails, rafra√Æchissement diff√©r√©, import dynamique), tests frontend Given/When/Then (`test_step_details_panel.mjs`) int√©gr√©s √† `npm run test:frontend`. Fichiers modifi√©s : `templates/index_new.html`, `static/css/components/steps.css`, `static/css/layout.css`, `static/main.js`, `static/stepDetailsPanel.js`, `static/uiUpdater.js`, `tests/frontend/test_step_details_panel.mjs`, `package.json`. Validation : `npm run test:frontend` OK. Audit mis √† jour (Phase 3 ‚úÖ).
- [2026-01-20 01:12:00] **Maintenance Tests Backend ‚Äî Phase 1-3 (COMPLET)** : Application compl√®te du Guide de Maintenance Tests Backend suite √† l'audit 2026-01-20. Corrections critiques : migration `_get_app_state` ‚Üí `get_workflow_state` dans `tests/unit/test_workflow_service.py` et `tests/integration/test_workflow_routes.py`, suppression m√©thodes obsol√®tes `convert_expanded_onedrive_url` et `fetch_csv_data` dans `tests/unit/test_csv_service_refactored.py`, correction imports `app_new` ‚Üí `create_app` dans `tests/integration/test_lemonfox_api_endpoint.py`, impl√©mentation locale `parse_progress_from_log_line`. Phase 2 : isolation environnement avec scripts `run_step3_tests.sh`, `run_step5_tests.sh`, `run_main_tests.sh` et configuration `pytest.ini`. Phase 3 : refactoring avec fixtures standardis√©es dans `conftest.py` et scripts d'automatisation (`diagnose_tests.sh`, `fix_backend_tests.sh`, `validate_tests.sh`). R√©sultats : 67 tests pass√©s Phase 1, 281 tests principaux Phase 2, patterns standardis√©s Phase 3. Documentation compl√®te dans `BACKEND_TESTS_MAINTENANCE_GUIDE.md`.
- [2026-01-18 21:00:00] **Suppression Feature "√âtape 5 ¬∑ Options avanc√©es"** : Suppression compl√®te de la fonctionnalit√© de configuration dynamique des chunks STEP5. Modifications effectu√©es : frontend (`templates/index_new.html`, `static/main.js`, `static/apiService.js`, `static/css/components/controls.css`), backend (`routes/api_routes.py`, `services/workflow_service.py`, `app_new.py`, `workflow_scripts/step5/run_tracking_manager.py`), documentation (`docs/workflow/pipeline/STEP5_SUIVI_VIDEO.md`, `docs/workflow/core/ARCHITECTURE_COMPLETE_FR.md`, etc.). Tests frontend OK, architecture simplifi√©e, chunking adaptatif fonctionne avec valeurs par d√©faut. Passe globale de v√©rification termin√©e : 0 artefact restant dans le code actif.
- [2026-01-18 20:29:00] **Suppression Supervision UI (Diagnostics/Statistiques/T√©l√©versement)** : Nettoyage complet du frontend (`templates/index_new.html`, `static/main.js`, `static/domElements.js`) pour retirer les boutons, modales, raccourcis clavier et imports li√©s aux features Supervision/Smart Upload. Chart.js et scripts associ√©s supprim√©s. Tests non ex√©cut√©s (modifications UI uniquement), inspection visuelle recommand√©e.
- [2026-01-18 02:48:00] **Documentation ‚Äî Post-audit Frontend 2026-01-17** : Mise √† jour de la documentation suite √† l'analyse triangul√©e Memory Bank/Code/Docs. Modifications : `ARCHITECTURE_COMPLETE_FR.md` (ajout section GPU STEP5 v4.2), `GUIDE_DEMARRAGE_RAPIDE.md` (tests frontend post-audit), `SMART_UPLOAD_FEATURE.md` (√©volutions UX/UI v4.1), `UPDATE_DOCUMENTATION_SUMMARY.md` (synchronisation audit frontend). Validation : coh√©rence documentation/code confirm√©e.
- [2026-01-18 02:27:00] **Audit UX/UI Unifi√© ‚Äî Sprint 2** : Mise en ≈ìuvre des recommandations ‚ÄúMoyen Terme‚Äù du m√™me audit : restructuration du panneau Settings en sections th√©matiques avec composants modulaires (`settings-block`, `advanced-controls`), ajout de badges d‚Äô√©tat dynamiques sur chaque step (`templates/index_new.html`, `static/css/components/steps.css`, `static/uiUpdater.js`), harmonisation des gabarits de modales/overlays et transitions (CSS + `popupManager.js`), transitions fluides + labellisation ARIA du toggle Settings (`static/main.js`). Tests non ex√©cut√©s (changement UI pur), inspection visuelle recommand√©e.
- [2026-01-18 02:10:00] **Audit UX/UI Unifi√© ‚Äî Sprint 1** : Impl√©mentation des 4 actions ‚ÄúCourt Terme‚Äù d√©crites dans `docs/workflow/audits/audit-ux-ui-unifie-2026-01-18.md` : hi√©rarchie des boutons principaux/secondaires (topbar contr√¥les), palette d‚Äô√©tats unifi√©e via `.status-badge`, repositionnement du widget syst√®me en bas-gauche et standardisation des styles `:disabled`. Fichiers impact√©s : `templates/index_new.html`, `static/css/components/{controls,steps,widgets}.css`, `static/css/{variables,base}.css`, `static/{apiService,uiUpdater}.js`. Tests manuels recommand√©s (pas ex√©cut√©s).
- [2026-01-18 00:09:03] **Audit Frontend ‚Äî Actions üü† (Performance & Qualit√©)** : Finalisation des 3 actions importantes restantes de l‚Äôaudit `docs/workflow/archives/audit-frontend-2026-01-17.md` : optimisation regex logs via `_COMPILED_LOG_PATTERNS` dans `static/uiUpdater.js`, √©chappement syst√©matique des variables interpol√©es dans `static/popupManager.js`, ajout d‚Äôun support global `prefers-reduced-motion` dans `static/css/base.css`. Validation : `npm run test:frontend` OK (exit code 0).
- [2026-01-17 23:56:00] **Audit Frontend ‚Äî Correctifs critiques (XSS, A11y, tests)** : Application des 3 actions critiques de l‚Äôaudit `docs/workflow/archives/audit-frontend-2026-01-17.md`. Correction XSS P0 dans `static/apiService.js` (remplacement `innerHTML +=` par DOM safe), impl√©mentation focus trap + restauration focus syst√©matique sur `static/statsViewer.js` et `static/reportViewer.js`, correction import `reportViewer` dans `static/main.js`. Ajout des tests critiques manquants : `tests/frontend/test_dom_batcher_performance.mjs` et `tests/frontend/test_focus_trap.mjs`. Validation : `npm run test:frontend` OK (exit code 0).
- [2026-01-13 12:33:00] **STEP5 (InsightFace GPU) ‚Äî Fix crash FileExistsError cache mod√®le** : Analyse logs `logs/step5/manager_tracking_20260113_114533.log` + `logs/step5/worker_GPU_R4094811_LPHDF Dedicace_16415.log` ‚Üí √©chec sur `FileExistsError: ~/.insightface/models/antelopev2` lors du download InsightFace. Correctif appliqu√© : `workflow_scripts/step5/face_engines.py` quarantine+retry (rename du dossier mod√®le en `*.corrupt_<ts>` puis r√©-init), log worker clarifi√© (`process_video_worker.py`). Tests unitaires mis √† jour + ajout test de non-r√©gression (`tests/unit/test_step5_insightface_engine.py`).
- [2026-01-13 11:36:00] **Audit Remediation Test Suite** : ex√©cution r√©ussie des tests Python cibl√©s (`pytest -q tests/integration/test_audit_remediation.py tests/unit/test_step7_finalization.py` : 10/10 passed, venv `env/` activ√©), warning Deprecation `invalid escape sequence '\-'` sur docstring `finalize_and_copy.py` √† corriger. Tests frontend OK (`npm run test:frontend`).
- [2026-01-13 00:29:00] **Perf front logs + doc s√©curit√©** : Optimisation de `static/uiUpdater.js` (`parseAndStyleLogContent`) avec regex pr√©-compil√©es et boucle lin√©aire pour r√©duire la pression CPU/GC sans perdre l'√©chappement XSS (`DOMUpdateUtils.escapeHtml`). Cr√©ation de `docs/workflow/SECURITY.md` (architecture webhook-only, validation STEP1/CSV, XSS frontend, token `INTERNAL_WORKER_COMMS_TOKEN`, strat√©gie NTFS/Fuseblk STEP7). Validation : `python3 -m compileall -q .` puis `npm run -s test:frontend`.
- [2026-01-13 00:15:00] **Rem√©diation audit backend (logs, perf, config)** : Centralisation compl√®te de la r√©cup√©ration des logs sp√©cifiques dans `WorkflowService` (routes d√©sormais thin controllers), optimisation du monitoring webhook (`CSVService` pr√©-calcul des URLs suivies en O(1)), refonte `CacheService` (suppression imports `app_new`, utilisation `WorkflowState`/`WorkflowCommandsConfig`), alignement des chemins Python dynamiques (`config.settings`, `scripts/run_tests.sh` + scripts utilitaires). Validation : `python3 -m compileall -q .` OK, plus aucune occurrence `env/bin/python`.
- [2026-01-12 23:20:00] **Fix P0 audit (stabilit√© + s√©curit√©)** : Correction des endpoints logs `/get_specific_log/*` (suppression `COMMANDS_CONFIG`, usage `WorkflowCommandsConfig`), correction crash `CacheService.get_cached_step_status()` (suppression `PROCESS_INFO`, usage `WorkflowState`), durcissement XSS UI logs/t√©l√©chargements (`static/uiUpdater.js` √©chappement avant `innerHTML`), suppression route dupliqu√©e `POST /run_custom_sequence` (conservation version `@measure_api`). 
- [2026-01-10 12:28:00] **Refactoring webhook download logic** : Suppression des entr√©es virtuelles "manual_open" pour les URLs non √©ligibles (FromSmash, SwissTransfer, externes), enforcement strict de l'auto-download Dropbox/proxy R2 uniquement. Modifications backend (`services/csv_service.py`), frontend (`static/csvWorkflowPrompt.js`), tests (`test_csv_dry_run.py`), et documentation compl√®te (docs/workflow/*). Validation : tests passants, comportement Dropbox-only confirm√©, architecture simplifi√©e.
- [2026-01-09 13:38:00] **Correction logique monitoring CSV** : Ajustement backend pour √©criture historique seulement pour t√©l√©chargements r√©els (ou DRY_RUN), r√©essais pour √©checs, correction frontend popup pour liens manuels non-Dropbox. Tests mis √† jour et valid√©s.
- [2026-01-09 01:10:00] **Correction popup Dropbox proxy (R2 URLs)** : R√©solution du probl√®me o√π les URLs `workers.dev/dropbox/...` √©taient incorrectement class√©es comme "liens externes". Corrections appliqu√©es : backend (`execute_csv_download_worker`) ajoute `url_type: 'dropbox'`, frontend (`csvWorkflowPrompt.js`) ajoute `isDropboxProxyUrl()` et `isDropboxLikeDownload()` pour reconna√Ætre les URLs proxy, cache-busting (`routes/workflow_routes.py`) avec `_STATIC_CACHE_BUSTER` timestamp. Validation : popup "T√©l√©chargement Termin√©" correctement affich√©e apr√®s hard refresh.

### D√©cembre 2025
- [2025-12-27 14:30] **Restriction GPU STEP5 √† InsightFace uniquement** : Modification de `run_tracking_manager.py` pour restreindre l'utilisation du GPU au seul moteur InsightFace. Mise √† jour de la documentation (`STEP5_GPU_USAGE.md`, `STEP5_SUIVI_VIDEO.md`) et ajout de tests unitaires complets. Tous les autres moteurs (MediaPipe, OpenSeeFace, OpenCV, EOS) sont d√©sormais forc√©s en mode CPU m√™me si `STEP5_ENABLE_GPU=1`.
- [2025-12-23 10:31] **STEP5 ‚Äî InsightFace GPU + fallback object detector multi-thread (IMAGE mode) : perf + warnings OK** : validation sur logs `logs/step5/insightface/manager_tracking_20251223_102425.log` + `worker_GPU_...19349.log` que `TRACKING_CPU_WORKERS=15` est bien propag√© (log `Object detection fallback workers ...: 15`), absence des warnings `Input timestamp must be monotonically increasing`, et am√©lioration de performance avec `STEP5_ENABLE_OBJECT_DETECTION=1`.
- [2025-12-23 01:15] **STEP5 ‚Äî Bench object detector OFF (correctif bool√©ens CLI + `.env`)** : validation que `STEP5_ENABLE_OBJECT_DETECTION=0` est bien propag√© et, apr√®s correction d'un doublon dans `.env` et alignement `STEP5_TRACKING_ENGINE`/`STEP5_GPU_ENGINES`, absence de logs d'initialisation du fallback object detector sur les runs `insightface` et `opencv_yunet_pyfeat`. Confirmation que `insightface` est significativement plus rapide que `opencv_yunet_pyfeat` (bottleneck YuNet CPU).
- [2025-12-22 12:40] **STEP5 ‚Äî Support GPU OpenCV YuNet + PyFeat** : Impl√©mentation lazy import MediaPipe via `importlib` pour √©viter conflits TensorFlow dans `tracking_env`, ajout subprocess pour v√©rifications TensorFlow GPU dans `STEP5_TF_GPU_ENV_PYTHON`, mise √† jour docs avec benchmarks (FaceMesh 34√ó, PyFeat 5-6√ó sur GTX 1650), ajout test pytest pour validation `CUDAExecutionProvider` dans logs, extension test pour supporter logs r√©els via `--step5-gpu-log`.
- [2025-12-21 13:15] **STEP5 ‚Äî Suppression compl√®te InsightFace** : retrait d√©finitif du moteur (code backend, env vars, docs, assets, tests, mod√®les). Validation via recherches globales, nettoyage `.env`, suppression des mod√®les `workflow_scripts/step5/models/engines/insightface`, ex√©cution cibl√©e de `pytest` et scripts pour confirmer que les autres moteurs restent fonctionnels.
- [2025-12-20 16:58] **STEP5 ‚Äî Int√©gration moteur InsightFace** : ajout `InsightFaceEngine` (RetinaFace/antelopev2, 5 landmarks, blendshapes ARKit 52 partiel), auto-d√©tection CUDA via ONNX Runtime (fallback CPU), throttling, downscaling rescale auto, profiling toutes les 20 frames. Environnement `insightface_env` (Python 3.10, onnxruntime-gpu, insightface 0.7.3). Config `.env` avec 7 variables `STEP5_INSIGHTFACE_*`. Tests : ~25 FPS GPU (640px max_width), ~1.5 Go VRAM sur GTX 1650. Documentation compl√®te : guide installation + section rapport technique. Tests unitaires : 5 tests (d√©pendances, throttling, max_faces, rescaling). Int√©gration `run_tracking_manager.py` + `create_face_engine()`.
- [2025-12-20 13:22] **Centralisation des virtualenvs via VENV_BASE_DIR** : introduction de la variable d‚Äôenvironnement, adaptation de `config.settings`, `WorkflowCommandsConfig`, `start_workflow.sh` et scripts STEP5 pour supporter des venvs relocalis√©s (ex: `/mnt/cache/venv/workflow_mediapipe`), v√©rification du fonctionnement des 5 environnements d√©plac√©s.
- [2025-12-20 01:24] **STEP5 ‚Äî R√©duction taille exports JSON** : Impl√©mentation STEP5_EXPORT_VERBOSE_FIELDS pour r√©duction de 74-95% des tailles JSON, compatibilit√© STEP6 pr√©serv√©e.
- [2025-12-20 01:24] **Corrections warnings STEP5** : Changement niveau log pour 'Failed to read frame' (fin vid√©o) et 'Audio schema missing' (WARNING ‚Üí DEBUG).
- [2025-12-20 01:24] **Am√©lioration logging upscale** : Ajout logs DEBUG pour rescale coordonn√©es dans YuNet, OpenSeeFace, EOS.
- [2025-12-19 22:31] **STEP5 ‚Äî Compatibilit√© compl√®te moteur `eos`** : ajout `STEP5_EOS_MAX_WIDTH` (downscaling 640px), `STEP5_ENABLE_PROFILING` (logs d√©taill√©s yunet/facemesh/eos_fit toutes les 20 frames), support `STEP5_BLENDSHAPES_THROTTLE_N` (fallback `STEP5_EOS_FIT_EVERY_N`), test valid√© avec downscale=0.33 et 32.84 FPS.
- [2025-12-19 22:xx] **STEP5 ‚Äî Am√©lioration moteur `eos`** : installation MediaPipe dans `eos_env` (object detector fallback activ√©), relocalisation assets EOS dans `workflow_scripts/step5/models/engines/eos/share`, validation multiprocessing avec 4 workers internes (23.79 FPS, export `landmarks`/`eos` confirm√©).
- [2025-12-19 21:xx] **STEP5 ‚Äî Validation runtime `eos_env` + assets externes** : cr√©ation `eos_env`, t√©l√©chargement des fichiers `share/` EOS vers `/home/kidpixel6/kidpixel_assets/eos/share`, ajout `STEP5_EOS_*` dans `.env`, installation d√©pendances manquantes (`scipy`) et smoke test OK sur `Jana-version-courte-Final.mp4` (export `landmarks` 68x3 + `eos.shape_coeffs`/`eos.expression_coeffs`).
- [2025-12-19 19:xx] **STEP5 ‚Äî Int√©gration moteur `eos` (3DMM)** : ajout `EosFaceEngine`, routage des workers via `eos_env`, propagation des variables `STEP5_EOS_*`, export JSON enrichi (`landmarks`/`eos`, bbox/centroid complets) + test unitaire.
- [2025-12-19 19:15] **R√©organisation des mod√®les STEP5** : Structure hi√©rarchique impl√©ment√©e avec succ√®s, tests valid√©s.
- [2025-12-19 17:30] **Am√©lioration du suivi vid√©o (STEP5) - OpenCV et MediaPipe** : support de `STEP5_OPENCV_MAX_FACES`, `STEP5_OPENCV_JAWOPEN_SCALE`, `STEP5_MEDIAPIPE_MAX_WIDTH` et profiling MediaPipe.
- [2025-12-19 15:34] **STEP5 ‚Äî Robustesse lecture OpenCV** : retries + placeholder pour frame manquante (corrige warning ‚ÄúFailed to read frame ‚Ä¶‚Äù et export dense).
- [2025-12-19 15:34] **STEP5 ‚Äî Logging OpenSeeFace** : trace explicite `STEP5_OPENSEEFACE_MODEL_ID` et param√®tres cl√©s au d√©marrage worker.
- [2025-12-19 13:34] **STEP5 ‚Äî OpenSeeFace** : support `STEP5_ENABLE_PROFILING`, timings internes, ajout `STEP5_OPENSEEFACE_MAX_WIDTH` et compatibilit√© throttle benchmark.
- [2025-12-19 11:15] **STEP5 ‚Äî Profiling & Tuning** : profiling multiprocessing (logs toutes les 20 frames), tuning perfs YuNet (`STEP5_YUNET_MAX_WIDTH`), et recommandation `TRACKING_CPU_WORKERS=4`.
- [2025-12-19 02:01] **STEP5 ‚Äî Profil d‚Äôexport blendshapes** : filtrage configurable (`full`/`mouth`/`none`/`mediapipe`/`custom`) + tests unitaires.
- [2025-12-19 01:45] **STEP5 ‚Äî Fix blendshapes YuNet/ONNX** : padding landmarks FaceMesh 468‚Üí478 pour compatibilit√© py-feat.
- [2025-12-18 20:45] **STEP5 ‚Äî Registry de mod√®les de d√©tection d'objets** : cr√©ation du registry (6 mod√®les), refactoring workers, documentation hardware et tests unitaires complets.
- [2025-12-18 19:30] **Activation du multiprocessing pour tous les moteurs de tracking** : suppression des contraintes de single-worker pour les moteurs OpenCV.
- [2025-12-18 15:05] **STEP5 ‚Äî Correction troncature JSON** : warmup du d√©codeur OpenCV avant le seek, assurant un export JSON dense (1..total_frames).
- [2025-12-17 20:45] **Documentation v4.1** : synchronisation compl√®te de la documentation avec Lemonfox et mise √† jour du portail docs.
- [2025-12-17 20:19] **STEP4 ‚Äî Lemonfox: hyperparam√®tres + smoothing** : ajout des param√®tres configurables et stabilisation de la timeline `is_speech_present`.
- [2025-12-17 19:54] **STEP4 ‚Äî Pyannote: preset optimal** : activation automatique de `optimal_tv_config.json` et gestion du fallback batch_size.
- [2025-12-17 19:12] **STEP4 ‚Äî Lemonfox: toggle + fallback** : impl√©mentation du wrapper Lemonfox avec fallback Pyannote et correctif des imports pour `audio_env`.
- [2025-12-17 15:50] **STEP4 ‚Äî Plan d‚Äôaction Lemonfox** : d√©finition du contrat JSON et du mapping Lemonfox ‚Üí frames.
- [2025-12-15 20:10] **STEP4 ‚Äî Correction divergence GPU/CPU (AMP)** : ajout du profil `gpu_fp32` pour √©viter les faux n√©gatifs de parole et instrumentation des logs.
- [2025-12-13 19:56] **Migration architecture Webhook uniquement** : suppression compl√®te des int√©grations Airtable, MySQL et CSV fallback. R√©duction massive de la complexit√© (20+ variables ‚Üí 4).
- [2025-12-13 18:02:53] **Normalisation des URLs et verrou r√©entrant** : application de `_normalize_url()` sur l'historique et passage en `RLock()` pour √©viter les deadlocks.
- [2025-12-13 17:18] **Correction AttributeError monitoring** : impl√©mentation des m√©thodes manquantes dans `WorkflowState` pour le monitoring CSV.
- [2025-12-13 10:49:30] **Correction bug re-t√©l√©chargement** : centralisation de l'historique dans `CSVService` avec format structur√©.
- [2025-12-12 21:46] **Alignement architecture et s√©curit√© (XSS)** : unification via `WorkflowCommandsConfig`, migration de l'√©tat CSV vers `WorkflowState` et standardisation `textContent` pour les progr√®s.
- [2025-12-11 21:16] **Support √©tendu fournisseurs tiers** : prise en charge g√©n√©rique des domaines FromSmash, SwissTransfer, etc.
- [2025-12-11 21:14] **Migration historique structur√©** : passage au format `{url, timestamp}` en heure locale.
- [2025-12-11 20:12] **Rapports mensuels** : ajout de la section "R√©partition des Dur√©es par Projet".
- [2025-12-10 12:08] **Support SwissTransfer** : ajout du support avec ouverture dans un nouvel onglet.

### Novembre 2025
- [2025-11-18 16:32] **Stabilisation STEP4 GPU (CUDA 11.x)** : environnement Python 3.10 d√©di√©, gestion OOM et succ√®s partiel.
- [2025-11-18 13:35] **Plan de migration WorkflowState** : d√©finition des 4 √©tapes pour l'unification de l'√©tat.
- [2025-11-18 13:32] **Migration WorkflowState (Phase active)** : √©limination des r√©f√©rences √† `PROCESS_INFO` dans l'application principale.
- [2025-11-18 13:30] **Refactoring de maintenabilit√© (Phases 1-3a)** : cr√©ation de `WorkflowState`, `WorkflowCommandsConfig` et `DownloadService`. 102 nouveaux tests.
- [2025-11-12 11:30] **Mise √† jour Documentation** : synchronisation via workflow docs-updater.
- [2025-11-02 12:00] **Suppression fonctionnalit√©s de rapport** : retrait de `report_service.py` et passage en gestion manuelle via `archives/`.
- [2025-11-02 00:38] **Alignement rapports mensuels** : harmonisation du comptage et robustesse du parsing HTML.

### Octobre 2025

### Historique synth√©tique (avant novembre 2025)

1. **Novembre 2025** ‚Äî Finalisation de la migration `WorkflowState`, refactoring de maintenabilit√©, stabilisation STEP4 GPU et rationalisation des rapports. D√©tails complets dans `archives/progress_legacy.md`.
2. **Octobre 2025** ‚Äî Hardening CSV/Dropbox, compression vid√©o STEP2, refonte UX (mode compact unique, toggles t√©l√©chargements) et renforcement du pipeline STEP5/rapport HTML-only. Voir l'archive pour la chronologie.
3. **Septembre 2025 et ant√©rieur** ‚Äî Mise en place des standards v4.1 (A11y, XSS), diagnostics syst√®me, architecture services, isolation des environnements et gestion d‚Äô√©tat frontend. Les entr√©es exhaustives sont conserv√©es dans l‚Äôarchive.

## Prochaines √âtapes
- Impl√©mentation des tests unitaires pour CSVService.
- Ajout de tests d'int√©gration pour le monitoring.
- Mise en place d'une rotation des logs.